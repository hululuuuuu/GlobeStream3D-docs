---
title: 参数
---

import Tag from "../../../components/tag.astro";
import Alert from "../../../components/alert.astro";

## options

---

创建 earth-flyline 实例所需参数配置

### options.dom（必填）

<br />
<Tag color="blue">类型: HTMLElement</Tag>
<Tag color="pink">说明：dom容器（需设置宽高）</Tag>

### options.autoRotate

<br />
<Tag color="blue">类型: boolean</Tag>
<Tag color="pink"> 说明: 是否自转</Tag>
<Tag color="purple">默认：true</Tag>

### options.rotateSpeed

<br />
<Tag color="blue">类型: number</Tag>
<Tag color="pink"> 说明: 自转速度</Tag>
<Tag color="purple">默认：0.01</Tag>

### options.map

<br />
<Tag color="blue">类型: string</Tag>
<Tag color="pink"> 说明: 已注册地图名称</Tag>
<Tag color="purple">默认：-</Tag>

### options.mode

<br />
<Tag color="blue">类型: string</Tag>
<Tag color="pink"> 说明: 渲染模式</Tag>
<Tag color="purple">默认：3d</Tag>

### options.limitFps

<br />
<Tag color="blue">类型: boolean</Tag>
<Tag color="pink">说明：是否锁定30帧</Tag>
<Tag color="purple">默认：false</Tag>

## options.config

内置模型样式配置

---

### config.R

<br />
<Tag color="blue">类型: number</Tag>
<Tag color="pink">说明: 地球半径</Tag>
<Tag color="purple">默认: 150</Tag>

### config.stopRotateByHover

<br />
<Tag color="blue">类型: boolean</Tag>
<Tag color="pink"> 说明: 地球自转是否受到鼠标悬停的影响</Tag>
<Tag color="purple">默认：true</Tag>
<br />
<Alert color="primary">
  例如: stopRotateByHover === true && autoRotate === true,鼠标悬停则地球停止自转
  <br />
  stopRotateByHover === false && autoRotate ===
  true鼠标悬停则地球不受影响会继续自转{" "}
</Alert>

### config.bgStyle

<br />
<Tag color="blue">类型: object</Tag>
<Tag color="pink"> 说明: 场景背景色</Tag>

<Tag color="purple">默认</Tag>
``` json
{
  color: "#040D21",
  opacity: 1,
}
```

### config.texture （只支持 3D 模式）

<br />

<Tag color="blue">类型: object</Tag>
<Tag color="pink">
  说明: 地球/地图的贴图效果,如果使用 mixed 则是 json 地图文件和贴图混合使用
</Tag>
<Tag color="purple">默认</Tag>
``` json // 混合策略的目的是希望关于部分地图色块复杂定制化（目前组件做不到的复杂样式），比如说希望给某个国家进行设置一个复杂的样式这种样式只能通过贴图来满足，其他的地区样式依旧采用
js 绘制。

// 举个例子，我们希望加拿大这个国家有独立的贴图样式，而其他的区域照旧通过 js 的方式绘制普通地图。
// 那么想实现这种效果有两种方式
// 1、应该是在注册地图前，处理一次地图数据，把加拿大相关数据给排除掉再进行地图注册。组件就不会绘制相关区域，这样贴图自然而然就显示出来了
// 2、我们不想处理地图文件，那么我们可以通过设置 config.regions.Canada.show 为 false，组件同样不会渲染该片区域。
import imageEarth from "./map/earth.png";

{
path:imageEarth, //图片地址 格式可以是 img 图片 或者 svg,
mixed: false, //是否混合地图和地球贴图 如果为 true 记得注册 json 地图文件
}

````
<br/>

### config.earth
<br/>
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 球体样式配置</Tag>
<br/>

<Tag color="purple">默认</Tag>

``` json
{
  color: "#13162c",
  material: "MeshPhongMaterial", //材质类型
  dragConfig:{
    rotationSpeed: 1,//和鼠标的交互速度
    inertiaFactor: 0.95,//惯性系数 0-1之间 0 为无惯性
    disableX: true,//是否禁用x轴旋转
    disableY: false,//是否禁用y轴旋转
  }
}
````

#### config.earth.material

<br />
<Tag color="blue">类型: string</Tag>
<Tag color="pink">球体材质 </Tag>
<Tag color="purple">默认: "MeshPhongMaterial"</Tag>
<br />
<Alert color="primary">
  "MeshPhongMaterial" | "MeshBasicMaterial" | "MeshLambertMaterial" |
  "MeshMatcapMaterial" | "MeshNormalMaterial"
  <br />
  想要细致了解材质请参考
  <a href="https://threejs.org/docs/#api/zh/materials/MeshBasicMaterial">
    文档
  </a>
</Alert>
### config.mapStyle
<br />
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 地图样式配置</Tag>

<br />
<br />

<Tag color="purple">默认</Tag>
``` json
{
  areaColor: "#2e3564", //区域颜色
  lineColor: "#797eff",//边界线颜色
}
```

### config.spriteStyle

<br />
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 地球光圈配置</Tag>

<br />
<br />

<Tag color="purple">默认: #797eff</Tag>
``` json
{
  color: "#797eff",
  show: true,//是否展示光圈
}
```

### config.pathStyle

<br />
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 飞线路径线配置</Tag>
<br />
<br />
<Tag color="purple">默认</Tag>

```json
{
  "color": "#cd79ff",
  "show": true
}
```

### config.flyLineStyle

<br />
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 蝌蚪飞线配置</Tag>
<br />
<br />
<Tag color="purple">默认</Tag>

```json
{
  color: "#cd79ff",
  duration:2000, // 一个完成动画所需时间(单位毫秒)，值越小动画速度越快
  delay:0,//延迟执行时间默认
  repeat:Infinity,//循环次数 无限循环
  onComplete:(params)=>{ //当repeat循环次数用尽之后的回调 当repeat为无限循环 则永不触发
    //do something
  }
}
```

### config.roadStyle

<br/>
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 路线图配置</Tag>
<br/>
<br/>
<Tag color="purple">默认</Tag>
``` json
//因为路线图包含了路径和飞线 所以支持 flyLineStyle 和 pathStyle 的所有配置
{
  flyLineStyle:{
    color: "#cd79ff",
    duration:2000, // 一个完成动画所需时间(单位毫秒)，值越小动画速度越快
    delay:0,//延迟执行时间默认
    repeat:Infinity,//循环次数 无限循环
    onComplete:(params)=>{ //当repeat循环次数用尽之后的回调 当repeat为无限循环 则永不触发
      //do something
    }
  },
  pathStyle:{
    color: "#cd79ff",
  }
}

````

### config.scatterStyle
<br/>
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 涟漪配置</Tag>
<br/>
<br/>
<Tag color="purple">默认</Tag>

``` json
{
  color: "#cd79ff",
  size:config.R * 0.05, //涟漪的尺寸 默认为 半径R*0.05
  duration:2000, // 一个完成动画所需时间(单位毫秒)，值越小动画速度越快
  delay:0,//延迟执行时间默认
  repeat:Infinity,//循环次数 无限循环
  onComplete:(params)=>{ //当repeat循环次数用尽之后的回调 当repeat为无限循环 则永不触发
    //do something
  },
  customFigure?:false //（该字段查看config.scatterStyle.customFigure详解）
}

````

### config.scatterStyle.customFigure

<Alert color="warning">注意：如果使用该字段则内置的涟漪不生效,动画需要自己配置</Alert>
``` json
  { //自定义节点样式
    texture: imgUrl or svgUrl,//自定义节点的贴图 可以是image的url 或者是svg的url
    animate: { //不配置animate则不会有动画执行,目前只支持 size和opacity的动画
      from: {
        size?: 11,
        opacity?: 0,
      },
      to: {
        size?: [22,11],
        opacity?: [1,0],
      },
    },
  },
简单说明：
我们拿opacity举例：form.opacity === 0为动画开始的初始透明度，to.opacity === [1,0]。表示动画经历三个阶段 0 > 1 >0 动画播放完成
如果to.opacity === [0.5,1,0.5,0] 则表示动画会经历 0>0.5>1>0.5>0 五个阶段过渡，一轮动画播放完成
```

<Alert color="error">
  请注意texture字段的图片或者svg需要白色,可以参考本项目下(/src/image/triangel)svg和png图片，颜色可以通过scatterStyle.color字段来控制
</Alert>
<br />

### config.hoverRegionStyle

<br />
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 鼠标hover区域高亮</Tag>
<Tag color="purple">默认: -</Tag>

<br />
<br />
<Tag color="red">举例</Tag>

```json
{
  "areaColor": "#cd79ff",
  "opacity": 1,
  "show": true
}
```

### config.barStyle

<br />
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 柱体</Tag>
<br />
<br />
<Tag color="purple">默认</Tag>

```json
{
  "color": "#cd79ff",
  "width": 0.5,
  "height": 0.5
}
```

<div>
  <img src="/bar_demo.png" />
</div>
### config.enableZoom

<br />
<Tag color="blue">类型: boolean</Tag>
<Tag color="pink">说明: 是否允许滚轮放大缩小</Tag>
<Tag color="purple">默认: false</Tag>

<br />
<br />
<Tag color="red">举例</Tag>

```json
{
  "enableZoom": true
}
```

<br />
### config.regions
<br />
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 单独配置地图区域的颜色</Tag>
<Tag color="purple">默认: -</Tag>

<br />
<br />

<Tag color="red">举例</Tag>
``` json
{
  China: {
    areaColor: "#2e3564",
  },
},
```
<Alert color="primary">提示：key值取地图json文件 里对应国家 properties.name 字段</Alert>

### config.wallStyle

<br/>
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 边界墙配置</Tag>
<br/>
<br/>
<Tag color="purple">默认</Tag>
``` json
//因为路线图包含了路径和飞线 所以支持 flyLineStyle 和 pathStyle 的所有配置
{
  wallStyle: {
    color: "#cd79ff", //颜色
    opacity: 0.5,//透明度
    height: 2, //墙体高度
    width: 2,//墙体宽度  一般不做调整
  }
}

````



``` javascript
//引入地图文件
import world from "./map/world.json";
const chartInstance = chart.init(...options)
const chinaData = world.features.find((item: any) => {
  return item.properties.name === "China";
}).geometry.coordinates;

//此处注意因为国家可能是由多个区域组成 比如中国大陆和中国台湾省，所以每一块儿都需要遍历添加
chinaData.forEach((item: any) => {
  chartInstance.addData("wall", {
    data: item,//请注意 data 的数据结构: [[[lon,lat],[lon,lat],[lon,lat]]] 三维数组，第一维代表多边形，第二维代表多边形的点位，第三维代表点位的经纬度
    style: {
      opacity: 0.5,
    },
  });
});
````

### config.mapStreamStyle

<br />
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 流体线</Tag>
<br />
<br />
<Tag color="purple">默认</Tag>

```json
{
  "mapStreamStyle": {
    "color": "#f0f0f0",
    "opacity": 0.5,
    "speed": 1,
    "splitLine": 3
  }
}
```

```javascript
//引入地图文件
import world from "./map/world.json";
const chartInstance = chart.init(...options);
const chinaData = world.features.find((item: any) => {
  return item.properties.name === "China";
}).geometry.coordinates;

//此处注意因为国家可能是由多个区域组成 比如中国大陆和中国台湾省，所以每一块儿都需要遍历添加
chinaData.forEach((item: any) => {
  chartInstance.addData("mapStreamLine", {
    data: item, //请注意 data 的数据结构: [[[lon,lat],[lon,lat],[lon,lat]]] 三维数组，第一维代表多边形，第二维代表多边形的点位，第三维代表点位的经纬度
    style: {
      //...
    },
  });
});
```

### config.textMark

<br />
<Tag color="blue">类型: object</Tag>
<Tag color="pink">说明: 文字标记</Tag>
<br />
<br />
<Tag color="red">举例</Tag>

```json
{
  "textMark": {
    //公共样式配置
    "style": {
      "fontSize": 20,
      "color": "#fff"
    },
    "data": [
      {
        "position": {
          "lon": 116.46,
          "lat": 39.92
        },
        "text": "北京",
        //定制化样式配置
        "style": {
          "fontSize": 22,
          "color": "red"
        }
      }
    ]
  }
}
```
